<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>网络服务器：Tomcat - wolai 笔记</title><link rel="shortcut icon"></link></head><body class="full-width"><header><div class="image has" style="background-position-y: 50%; background-image: url(&quot;media/java-2410.jpg&quot;)"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="网络服务器：Tomcat" class="main-title"></div></div></header><article><h1 id="qf7fKUVTS3MsAz5hgTHXhX" class="wolai-block"><span class="wolai-serial-number">1</span><span class="inline-wrap">Tomcat<span class="jill"></span>的缺省端口是多少，怎么修改？</span></h1><div id="2HRkhRzE1GG3rdXgfLaT2u" class="wolai-block wolai-text"><div><span class="inline-wrap">默认端口为<span class="jill"></span>8080，可以通过在<span class="jill"></span>tomcat<span class="jill"></span>安装包<span class="jill"></span>conf<span class="jill"></span>目录下，service.xml<span class="jill"></span>中的<span class="jill"></span>Connector<span class="jill"></span>元素的<span class="jill"></span>port<span class="jill"></span>属性来修改端口。</span></div></div><div id="76B2SP1jDPnWHBmgXQk2zP" class="bg-fluorescent_green wolai-block wolai-text"><div><span class="inline-wrap"> </span><br/></div></div><div id="fH29Y8A19g3pLPqoTfptZ3" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h1 id="vmeuXwwn2jnY2w4zPh8D9q" class="wolai-block"><span class="wolai-serial-number">2</span><span class="inline-wrap">Tomcat 有哪几种<span class="jill"></span>Connector 运行模式(优化)？</span></h1><div id="iY3S3GUsDupkqUVzD5XYRW" class="wolai-block wolai-text"><div><span class="inline-wrap">有三种，这三种模式的不同之处如下：</span></div></div><div id="7rhsmCcsKA28WB7kt1VRYV" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>BIO</b></span><span class="inline-wrap">：一个线程处理一个请求。缺点：并发量高时，线程数较多，浪费资源。Tomcat7<span class="jill"></span>版本或更低版本中，在<span class="jill"></span>Linux<span class="jill"></span>系统中默认使用这种方式。</span></div></div><div id="vL2NNGrbcRsQqg2QdFY3XB" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>NIO</b></span><span class="inline-wrap">：利用<span class="jill"></span>Java<span class="jill"></span>的异步<span class="jill"></span>IO<span class="jill"></span>处理，可以通过少量的线程处理大量的请求。Tomcat8.0.x<span class="jill"></span>中默认使用的是<span class="jill"></span>NIO。Tomcat7<span class="jill"></span>必须修改<span class="jill"></span>Connector<span class="jill"></span>配置来启动。</span></div></div><code-block id="sin4oNRfh8bgCC3b9hbRnP" class="wolai-block"><div class="wolai-pre"><div data-lang="XML" class="marker"></div><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.coyote.http11.Http11NioProtocol<span class="token punctuation">"</span></span>
<span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span> <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></div></code-block><div id="v7PMiuPFd3KnFcfAt1ViG8" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="bz3TY1JXFtVdgnLY6yLmcD" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>APR</b></span><span class="inline-wrap">：即<span class="jill"></span>Apache Portable Runtime，从操作系统层面解决<span class="jill"></span>io<span class="jill"></span>阻塞问题。Tomcat7<span class="jill"></span>或<span class="jill"></span>Tomcat8<span class="jill"></span>在<span class="jill"></span>Win7<span class="jill"></span>或以上的系统中启动默认使用这种方式。</span></div></div><div id="F7CaARTppoKPw58MKN2g3" class="bg-fluorescent_green wolai-block wolai-text"><div><span class="inline-wrap"> </span><br/></div></div><div id="ifeKgLA46csZsVgxBeJsDj" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h1 id="cTFe83wf4zNJ61CrmrEo6B" class="wolai-block"><span class="wolai-serial-number">3</span><span class="inline-wrap">Tomcat<span class="jill"></span>有几种部署方式？</span></h1><div id="33z9RFFzsBAp1UKGa12WDU" class="wolai-block wolai-text"><div><span class="inline-wrap">利用<span class="jill"></span>Tomcat<span class="jill"></span>的自动部署：把<span class="jill"></span>web<span class="jill"></span>应用拷贝到<span class="jill"></span>webapps<span class="jill"></span>目录（生产环境不建议放在该目录中）。</span></div></div><div id="s3rYsEUa2gpUuUt39refCE" class="wolai-block wolai-text"><div><span class="inline-wrap">Tomcat<span class="jill"></span>在启动时会加载目录下的应用，并将编译后的结果放入<span class="jill"></span>work<span class="jill"></span>目录下。</span></div></div><div id="2MFwviSdFMF9qZs2weJfrf" class="wolai-block wolai-text"><div><span class="inline-wrap">使用<span class="jill"></span>Manager App<span class="jill"></span>控制台部署：在<span class="jill"></span>tomcat<span class="jill"></span>主页点击“Manager App” 进入应用管理控制台，可以指定一个<span class="jill"></span>web<span class="jill"></span>应用的路径或<span class="jill"></span>war<span class="jill"></span>文件。</span></div></div><div id="58angkbGtXLyCVPwvUA6xr" class="wolai-block wolai-text"><div><span class="inline-wrap">修改<span class="jill"></span>conf/server.xml<span class="jill"></span>文件部署：在<span class="jill"></span>server.xml<span class="jill"></span>文件中，增加<span class="jill"></span>Context<span class="jill"></span>节点可以部署应用。</span></div></div><div id="67WAQijT6APQocDn4X4hDS" class="wolai-block wolai-text"><div><span class="inline-wrap">增加自定义的<span class="jill"></span>Web<span class="jill"></span>部署文件：在<span class="jill"></span>conf/Catalina/localhost/路径下增加 xyz.xml<span class="jill"></span>文件，内容是<span class="jill"></span>Context<span class="jill"></span>节点，可以部署应用。</span></div></div><div id="rmvf1qerTkQuypyp5TBgk8" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="m2sLUJScFnEnYJpHC7eC6X" class="bg-fluorescent_green wolai-block wolai-text"><div><span class="inline-wrap"> </span><br/></div></div><h1 id="forVRT77XSPn9nveRr3ewn" class="wolai-block"><span class="wolai-serial-number">4</span><span class="inline-wrap">Tomcat<span class="jill"></span>容器是如何创建<span class="jill"></span>servlet<span class="jill"></span>类实例？用到了什么原理？</span></h1><div id="aJxFajAmf52GVtMUEAn948" class="wolai-block wolai-text"><div><span class="inline-wrap">当容器启动时，会读取在<span class="jill"></span>webapps<span class="jill"></span>目录下所有的<span class="jill"></span>web<span class="jill"></span>应用中的<span class="jill"></span>web.xml<span class="jill"></span>文件，然后对 xml<span class="jill"></span>文件进行解析，并读取<span class="jill"></span>Servlet<span class="jill"></span>注册信息。</span></div></div><div id="sWSJwG8Tp77XoRaEwysJgY" class="wolai-block wolai-text"><div><span class="inline-wrap">然后，将每个应用中注册的<span class="jill"></span>servlet<span class="jill"></span>类都进行加载，并通过 反射的方式实例化（有时候也是在第一次请求时实例化）。</span></div></div><div id="8mvxKTnUYJsErpWsbcV3Vy" class="wolai-block wolai-text"><div><span class="inline-wrap">在<span class="jill"></span>Servlet<span class="jill"></span>注册时配置<span class="jill"></span>load-on-startup<span class="jill"></span>如果为正数，则在一开始就实例化，如果不写或为负数，则第一次请求实例化。</span></div></div><div id="wRcVyG5uFiArax1Uu85cvG" class="wolai-block wolai-text"><div></div></div><div id="j7DFRMaSd8aNDoe1H7npK7" class="bg-fluorescent_green wolai-block wolai-text"><div><span class="inline-wrap"> </span><br/></div></div><h1 id="2BymF4vwNfvKe6Wvv9Jz1H" class="wolai-block"><span class="wolai-serial-number">5</span><span class="inline-wrap">Tomcat<span class="jill"></span>如何优化？</span></h1><div id="dDPfm923V3SoEgZbyL95p7" class="wolai-block wolai-text"><div><span class="inline-wrap">Tomcat<span class="jill"></span>作为<span class="jill"></span>Web<span class="jill"></span>服务器，它的处理性能直接关系到用户体验，下面是几种常见的优化措施：</span></div></div><h2 id="fFCMoqeP3QXK3KAjLdejGQ" class="wolai-block"><span class="wolai-serial-number">5.1</span><span class="inline-wrap">杂项配置</span></h2><ul class="wolai-block"><li id="v4GpbXXfpbze3TFTNCKoMC"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">去掉对<span class="jill"></span>web.xml<span class="jill"></span>的监视，把<span class="jill"></span>JSP<span class="jill"></span>提前编辑成<span class="jill"></span>Servlet。</span></li><li id="sac9N5dv26qEmyNS4rqhj7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">有富余物理内存的情况，加大<span class="jill"></span>Tomcat<span class="jill"></span>使用的<span class="jill"></span>JVM<span class="jill"></span>的内存服务器所能提供<span class="jill"></span>CPU、内存、硬盘的性能对处理能力有决定性影响。对于高并发情况下会有大量的运算，那么<span class="jill"></span>CPU<span class="jill"></span>的速度会直接影响到处理速度。内存在大量数据处理的情况下，将会有较大的内存容量需求，可以用-Xmx -Xms -XX:MaxPermSize<span class="jill"></span>等参数对内存不同功能块进行划分。我们之前就遇到过内存分配不足，导致虚拟机一直处于<span class="jill"></span>full GC，从而导致处理能力严重下降。</span></li><li id="jxCsMXcadrbkWqVBQrnUvv"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">硬盘主要问题就是读写性能，当大量文件进行读写时，磁盘极容易成为性能瓶颈。最好的办法还是利用下面提到的缓存。利用缓存和压缩对于静态页面最好是能够缓存起来，这样就不必每次从磁盘上读。</span></li><li id="w3hy2pDSrKDQx7wJNSVozQ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">这里我们采用了<span class="jill"></span>Nginx<span class="jill"></span>作为缓存服务器，将图片、CSS、JS<span class="jill"></span>文件都进行了缓存，有效地减少了后端<span class="jill"></span>Tomcat<span class="jill"></span>的访问。</span></li><li id="rCkRcf2iMBWHieD7NXposY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">另外，为了能加快网络传输速度，开启<span class="jill"></span>gzip<span class="jill"></span>压缩也是必不可少的。但考虑到<span class="jill"></span>tomcat<span class="jill"></span>已经需要处理很多东西了，所以把这个压缩的工作就交给前端的<span class="jill"></span>Nginx<span class="jill"></span>来完成。</span></li><li id="nmWEcFG4LwV6HCFTayLD68"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">除了文本可以用<span class="jill"></span>gzip<span class="jill"></span>压缩，其实很多图片也可以用图像处理工具预先进行压缩，找到一个平衡点可以让画质损失很小而文件可以减小很多。曾经我就见过一个图片从<span class="jill"></span>300<span class="jill"></span>多<span class="jill"></span>kb<span class="jill"></span>压缩到几十<span class="jill"></span>kb，肉眼几乎看不出来区别。</span></li><li id="hEga4uttJf75U7kQViUZPJ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">采用集群单个服务器性能总是有限的，最好的办法自然是实现横向扩展，那么组建<span class="jill"></span>Tomcat<span class="jill"></span>集群是有效提升性能的手段。我们还是采用了<span class="jill"></span>Nginx<span class="jill"></span>来作为请求分流的服务器，后端多个<span class="jill"></span>Tomcat<span class="jill"></span>共享<span class="jill"></span>Session<span class="jill"></span>来协同工作。</span></li><li id="ruLXyhWaUx29cN1yUamstL"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">删除没用的<span class="jill"></span>Web<span class="jill"></span>应用：因为<span class="jill"></span>Tomcat<span class="jill"></span>启动每次都会部署这些应用。</span></li><li id="saVm4vCxmDU4NXioaoL4rj"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">关闭<span class="jill"></span>WebSocket：websocket-api.jar<span class="jill"></span>和<span class="jill"></span>tomcat-websocket.jar。</span></li><li id="7nNvZTHfV3YTBAmq6oSgz8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">随机数优化：设置<span class="jill"></span>JVM<span class="jill"></span>参数：-Djava.security.egd=file:/dev/./urandom。</span></li></ul><div id="udcjS5TD4fVjW9fFkGXAZ2" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 id="tiHqXEUF2a5hVoqHxAxr59" class="wolai-block"><span class="wolai-serial-number">5.2</span><span class="inline-wrap">线程数优化</span></h2><div id="ay6fYimCYMwfmavbP8H2Nt" class="wolai-block wolai-text"><div><span class="inline-wrap">找到&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;&gt;，增加<span class="jill"></span>maxThreads<span class="jill"></span>和<span class="jill"></span>acceptCount<span class="jill"></span>属性（使<span class="jill"></span>acceptCount<span class="jill"></span>大于等于<span class="jill"></span>maxThreads），如下：</span></div></div><code-block id="5KsSpUvWMMsyfyw38VQN82" class="wolai-block"><div class="wolai-pre"><div data-lang="XML" class="marker"></div><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span><span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span> <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span><span class="token attr-name">acceptCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">maxThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></div></code-block><div id="6Yj2QHXv2VNHg5PLxicuyQ" class="wolai-block wolai-text"><div><span class="inline-wrap">其中：</span></div></div><ul class="wolai-block"><li id="t5AChKFuWaQrUwYbStwarm"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">maxThreads：Tomcat<span class="jill"></span>可用于请求处理的最大线程数，默认是<span class="jill"></span>200</span></li><li id="ircMPuVHgsrwUptr2GYU5S"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">minSpareThreads：Tomcat<span class="jill"></span>初始线程数，即最小空闲线程数</span></li><li id="uodoYyHLyUVU3UWLcxbjD8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">maxSpareThreads：Tomcat<span class="jill"></span>最大空闲线程数，超过的会被关闭</span></li><li id="wpwn4W3b1KuBTnMvAXDV8U"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">acceptCount：当所有可以使用的处理请求的线程数都被使用时，可以放到处理队列中的请求数，超过这个数的请求将不予处理。默认<span class="jill"></span>100  </span></li></ul><div id="exz1XL9eT98JWx7QxhaoUi" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 id="b8hbA6Zo25q3r6cnGpQht4" class="wolai-block"><span class="wolai-serial-number">5.3</span><span class="inline-wrap">使用线程池优化</span></h2><div id="k9ZqDKNrjopVauoeuvd5BF" class="wolai-block wolai-text"><div><span class="inline-wrap">在<span class="jill"></span>server.xml<span class="jill"></span>中增加<span class="jill"></span>executor<span class="jill"></span>节点，然后配置<span class="jill"></span>connector<span class="jill"></span>的<span class="jill"></span>executor<span class="jill"></span>属性，如下：  </span></div></div><code-block id="mxhGnJooq6CEK3CQs2W4UM" class="wolai-block"><div class="wolai-pre"><div data-lang="XML" class="marker"></div><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Executor</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tomcatThreadPool<span class="token punctuation">"</span></span> <span class="token attr-name">namePrefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>req-exec-<span class="token punctuation">"</span></span><span class="token attr-name">maxThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span> 
  <span class="token attr-name">minSpareThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span><span class="token attr-name">maxIdleTime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span><span class="token attr-name">executor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tomcatThreadPool<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></div></code-block><div id="cKStDCfZA6DHmojXLH95AA" class="wolai-block wolai-text"><div><span class="inline-wrap">其中：  </span></div></div><ul class="wolai-block"><li id="9qoaHZAqV22dYzvbnhSsMe"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">namePrefix：线程池中线程的命名前缀</span></li><li id="gZs8d6bSDLcrUt7K8fe3tX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">maxThreads：线程池的最大线程数</span></li><li id="fsk7K7oWmVuTeC1srVBgDY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">minSpareThreads：线程池的最小空闲线程数</span></li><li id="tZhNM794cQEbnDnACw1t5Z"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">maxIdleTime：超过最小空闲线程数时，多的线程会等待这个时间长度，然后关闭</span></li><li id="ef4e6rWrno8146YUJpmKUH"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">threadPriority：线程优先级</span></li></ul><div id="qhKhWcZNk6UVtbr5VHWr7a" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="u1bm3S8cqFzR5gGdqUVWSN" class="wolai-block wolai-text"><div><span class="inline-wrap">备注：</span></div></div><div id="bV9iR5Q7ZkFGqdioD6nc3z" class="wolai-block wolai-text"><div><span class="inline-wrap">当<span class="jill"></span>Tomcat<span class="jill"></span>并发用户量大的时候，单个<span class="jill"></span>JVM<span class="jill"></span>进程确实可能打开过多的文件句柄，这时会报<span class="jill"></span>java.net.SocketException:Too many open files<span class="jill"></span>错误。</span></div></div><div id="sPKh82opgHTFJyx7rqq2tz" class="wolai-block wolai-text"><div><span class="inline-wrap">可使用下面步骤检查：</span></div></div><ul class="wolai-block"><li id="rQ8AVEu3oMmFCE1BgTqMSa"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">ps -ef |grep tomcat 查看<span class="jill"></span>tomcat<span class="jill"></span>的进程<span class="jill"></span>ID，记录<span class="jill"></span>ID<span class="jill"></span>号；</span></li><li id="uvoLCAqLtrAAGZ6nweH7x3"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">假设进程<span class="jill"></span>ID<span class="jill"></span>为<span class="jill"></span>10001，则运行： lsof -p 10001|wc -l 查看当前进程<span class="jill"></span>id<span class="jill"></span>为<span class="jill"></span>10001<span class="jill"></span>的 文件操作数</span></li><li id="q8B7sKNAkRQDjqKUuhaJfv"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用命令：ulimit -a 查看每个用户允许打开的最大文件数启动速度优化</span></li></ul><div id="9w4WemfpVR1DBnC8hRbKve" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 id="eGNra3dtbCkvFfWPbCLKP1" class="wolai-block"><span class="wolai-serial-number">5.4</span><span class="inline-wrap">附：JVM<span class="jill"></span>相关参数</span></h2><div id="7KbfjbcQYNi1ervzahKZHN" class="wolai-block wolai-text"><div><span class="inline-wrap">-Xms：虚拟机初始化时的最小堆内存。</span></div></div><div id="o5uvq37cQtZUqqKDh5iLFr" class="wolai-block wolai-text"><div><span class="inline-wrap">-Xmx：虚拟机可使用的最大堆内存。</span></div></div><div id="xjvLLXujZwFRFhBmEJ3Nco" class="wolai-block wolai-text"><div><span class="inline-wrap">-Xms<span class="jill"></span>与-Xmx<span class="jill"></span>设成一样的值，避免<span class="jill"></span>JVM<span class="jill"></span>因为频繁的<span class="jill"></span>GC<span class="jill"></span>导致性能大起大落</span></div></div><div id="d4aZRCgbtuJRVGe1kmh13p" class="wolai-block wolai-text"><div><span class="inline-wrap">-XX:MaxNewSize：新生代占整个堆内存的最大值。</span></div></div><div id="93MvEzTP1THxz9gSkujBXw" class="wolai-block wolai-text"><div><span class="inline-wrap">另外还有方法区参数调整（注意：JDK<span class="jill"></span>版本）、垃圾收集器等优化。</span></div></div><div id="sVWR9ZDd4B82tXAuu8PTbU" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="avgbqQDM91YLQvCS8f8ot3" class="bg-fluorescent_green wolai-block wolai-text"><div><span class="inline-wrap"> </span><br/></div></div><h1 id="rTZ2AargARzSfu3Dqp89Zu" class="wolai-block"><span class="wolai-serial-number">6</span><span class="inline-wrap">Tomcat<span class="jill"></span>的常用配置有哪些？</span></h1><blockquote id="ge44tN7sJcCyV5Ea18R9cm" class="wolai-block"><span class="inline-wrap">备注：本题的答案内容基于<span class="jill"></span>Tomcat10</span></blockquote><h2 id="mz2t1LE2MHQFTAX8wJiDQM" class="wolai-block"><span class="wolai-serial-number">6.1</span><span class="inline-wrap">server.xml</span></h2><span class="inline-wrap"></span><br/><div id="3Gtt8HskTPdgDFE32kwcTS" class="wolai-block wolai-text"><div><span class="inline-wrap">标签名</span></div></div><span class="inline-wrap"></span><br/><div id="hjrWfrDWz7nLNqaAcVFssi" class="wolai-block wolai-text"><div><span class="inline-wrap">属性名</span></div></div><span class="inline-wrap"></span><br/><div id="eKJUMeZcK88iYJ2vvJYgCe" class="wolai-block wolai-text"><div><span class="inline-wrap">作用</span></div></div><span class="inline-wrap"></span><br/><div id="iPPqavg1ku88t24N8pxYh" class="wolai-block wolai-text"><div><span class="inline-wrap">Server</span></div></div><span class="inline-wrap"></span><br/><div id="cMTmx7zPmKK62Na1H9x7dF" class="wolai-block wolai-text"><div><span class="inline-wrap">port</span></div></div><span class="inline-wrap"></span><br/><div id="u8Fz2qfTXLA3ejBezFodRc" class="wolai-block wolai-text"><div><span class="inline-wrap">指定<span class="jill"></span>Tomcat<span class="jill"></span>监听的关闭端口号，默认为<span class="jill"></span>8005。</span></div></div><span class="inline-wrap"></span><br/><div id="a1iYtq5u5wM4x1nTKYvKox" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="vbbYzdHHp3EzZSG5z92HE2" class="wolai-block wolai-text"><div><span class="inline-wrap">shutdown</span></div></div><span class="inline-wrap"></span><br/><div id="eXTTSW1uY1jXqgCVLxEKju" class="wolai-block wolai-text"><div><span class="inline-wrap">指定关闭命令字符串，默认为<span class="jill"></span>SHUTDOWN。</span></div></div><span class="inline-wrap"></span><br/><div id="ti8HYTfGj3PKZLfXhipEmq" class="wolai-block wolai-text"><div><span class="inline-wrap">Service</span></div></div><span class="inline-wrap"></span><br/><div id="kNFcbn6CnxBhdRVWGmbqek" class="wolai-block wolai-text"><div><span class="inline-wrap">name</span></div></div><span class="inline-wrap"></span><br/><div id="4zhmZcEna6qHEYaM2QoZan" class="wolai-block wolai-text"><div><span class="inline-wrap">此服务的显示名称，主要用于在日志中进行标识服务。</span></div></div><span class="inline-wrap"></span><br/><div id="iQ7YhUgB8aD7PMo6rqNqqg" class="wolai-block wolai-text"><div><span class="inline-wrap">Connector</span></div></div><span class="inline-wrap"></span><br/><div id="vecdobnKBjzALv9Nmz536W" class="wolai-block wolai-text"><div><span class="inline-wrap">port</span></div></div><span class="inline-wrap"></span><br/><div id="doK3L8t2ZnLAkDXdFW66L1" class="wolai-block wolai-text"><div><span class="inline-wrap">指定连接器监听的端口号，对于<span class="jill"></span>HTTP<span class="jill"></span>协议通常是<span class="jill"></span>8080。</span></div></div><span class="inline-wrap"></span><br/><div id="nbFviMCEgVu9WGkkF3YgCN" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="eWezfuPFKM3wQysgHtpcQJ" class="wolai-block wolai-text"><div><span class="inline-wrap">protocol</span></div></div><span class="inline-wrap"></span><br/><div id="gqZTVLRWxVzhosDcYH7aJr" class="wolai-block wolai-text"><div><span class="inline-wrap">指定使用的协议，如<span class="jill"></span>HTTP/1.1<span class="jill"></span>或<span class="jill"></span>AJP/1.3。</span></div></div><span class="inline-wrap"></span><br/><div id="sf1nV8qL4vnC3mc9hJzZH8" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="kjC7ZNTv22oWakWWSG59ts" class="wolai-block wolai-text"><div><span class="inline-wrap">connectionTimeout</span></div></div><span class="inline-wrap"></span><br/><div id="tCD5r3dFvAzSJquAJ2mziq" class="wolai-block wolai-text"><div><span class="inline-wrap">客户端连接超时时间（毫秒）。</span></div></div><span class="inline-wrap"></span><br/><div id="94mY9g3cTpW5DWor5GPvju" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="sQiDc6kdJxMPuuA8jBUepq" class="wolai-block wolai-text"><div><span class="inline-wrap">redirectPort</span></div></div><span class="inline-wrap"></span><br/><div id="icsKPSj4nRimvo2VWFSsZd" class="wolai-block wolai-text"><div><span class="inline-wrap">在需要重定向到<span class="jill"></span>SSL<span class="jill"></span>时使用的端口号。</span></div></div><span class="inline-wrap"></span><br/><div id="qgF8mzB92Ug5dd91SBHSbL" class="wolai-block wolai-text"><div><span class="inline-wrap">Engine</span></div></div><span class="inline-wrap"></span><br/><div id="rAzvhp1FTxxUqadeeR4aJ8" class="wolai-block wolai-text"><div><span class="inline-wrap">name</span></div></div><span class="inline-wrap"></span><br/><div id="6o8R1MyNno9QJwDqbD7LHk" class="wolai-block wolai-text"><div><span class="inline-wrap">引擎的名称，默认主机名为<span class="jill"></span>localhost。</span></div></div><span class="inline-wrap"></span><br/><div id="xn3d5nU4BBom85w55yQS7e" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="e7raLUDajUDsKxZQwUSF3u" class="wolai-block wolai-text"><div><span class="inline-wrap">defaultHost</span></div></div><span class="inline-wrap"></span><br/><div id="gFvRNzf7ccUihFmBU1VZ4y" class="wolai-block wolai-text"><div><span class="inline-wrap">默认主机名。</span></div></div><span class="inline-wrap"></span><br/><div id="v2vcKQ1CFaauRMec4RgofD" class="wolai-block wolai-text"><div><span class="inline-wrap">Host</span></div></div><span class="inline-wrap"></span><br/><div id="aWSzpY4jVT8eZwH9wKe7ce" class="wolai-block wolai-text"><div><span class="inline-wrap">name</span></div></div><span class="inline-wrap"></span><br/><div id="eNCdG4y76nfjn9MvRVxZXy" class="wolai-block wolai-text"><div><span class="inline-wrap">虚拟主机的名称。</span></div></div><span class="inline-wrap"></span><br/><div id="iVdYD5FBfvaCJyxf5tqjSF" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="sUr4NG1o8RXTecNKVaMBEt" class="wolai-block wolai-text"><div><span class="inline-wrap">appBase</span></div></div><span class="inline-wrap"></span><br/><div id="aRoknbujNjbKep25wyN9eU" class="wolai-block wolai-text"><div><span class="inline-wrap">Web<span class="jill"></span>应用的基本目录。</span></div></div><span class="inline-wrap"></span><br/><div id="e3DhtNzyZUgXewB9HLZwRa" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="eTAfShiC7mcqJefN9kPe3z" class="wolai-block wolai-text"><div><span class="inline-wrap">unpackWARs</span></div></div><span class="inline-wrap"></span><br/><div id="ehhp6DLC2xgqwgiYjC7C36" class="wolai-block wolai-text"><div><span class="inline-wrap">如果设置为<span class="jill"></span>true，则<span class="jill"></span>Tomcat<span class="jill"></span>会自动解压<span class="jill"></span>WAR<span class="jill"></span>文件。</span></div></div><span class="inline-wrap"></span><br/><div id="daASJQQKpjLgn6u8eSssYv" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="rkeWkpPW7ohPF9tUYmpGnQ" class="wolai-block wolai-text"><div><span class="inline-wrap">autoDeploy</span></div></div><span class="inline-wrap"></span><br/><div id="umSRNM8KPEfaKhGzppaYgN" class="wolai-block wolai-text"><div><span class="inline-wrap">如果设置为<span class="jill"></span>true，则<span class="jill"></span>Tomcat<span class="jill"></span>会自动部署应用。</span></div></div><span class="inline-wrap"></span><br/><div id="6KKXr7mzGsaHdRFWJ4G9ey" class="wolai-block wolai-text"><div><span class="inline-wrap">Context</span></div></div><span class="inline-wrap"></span><br/><div id="ixYjLbDCpJ7yV97d6cujKc" class="wolai-block wolai-text"><div><span class="inline-wrap">docBase</span></div></div><span class="inline-wrap"></span><br/><div id="38WuV8uFH9AbySXjw5urYY" class="wolai-block wolai-text"><div><span class="inline-wrap">Web<span class="jill"></span>应用的文档基础路径。</span></div></div><span class="inline-wrap"></span><br/><div id="kQCLmJRrRYxwq5AuaFntDJ" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="aWdcdQ5GzES1Pe7uKhnujg" class="wolai-block wolai-text"><div><span class="inline-wrap">path</span></div></div><span class="inline-wrap"></span><br/><div id="eXdj4nknqwaNmSxgyB1LN5" class="wolai-block wolai-text"><div><span class="inline-wrap">Web<span class="jill"></span>应用的上下文路径。</span></div></div><span class="inline-wrap"></span><br/><div id="dMJDyaeR7qiA4GzH2gd22T" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="g5SDuH21Tj3F7jwTPCVP2t" class="wolai-block wolai-text"><div><span class="inline-wrap">reloadable</span></div></div><span class="inline-wrap"></span><br/><div id="qZzaXXSqYB1PLZDrJ49VrE" class="wolai-block wolai-text"><div><span class="inline-wrap">如果设置为<span class="jill"></span>true，则支持热部署。</span></div></div><span class="inline-wrap"></span><br/><div id="thfa42miZrJADRw4qd5ZQ9" class="wolai-block wolai-text"><div><span class="inline-wrap">Realm</span></div></div><span class="inline-wrap"></span><br/><div id="krJXhpA9LKG1XDvcTQ34b" class="wolai-block wolai-text"><div><span class="inline-wrap">className</span></div></div><span class="inline-wrap"></span><br/><div id="e8QdSs4dd1PN1X77VqaXUy" class="wolai-block wolai-text"><div><span class="inline-wrap">指定<span class="jill"></span>Realm<span class="jill"></span>类的全限定名。</span></div></div><span class="inline-wrap"></span><br/><div id="bsZhfw4BDoLNZUffiDxTzv" class="wolai-block wolai-text"><div><span class="inline-wrap">GlobalNamingResources</span></div></div><span class="inline-wrap"></span><br/><div id="e11DU9TSQ9FGoXMi51EHLW" class="wolai-block wolai-text"><div><span class="inline-wrap">resourceName</span></div></div><span class="inline-wrap"></span><br/><div id="o1feV7Fr9drUCszkVcBKLU" class="wolai-block wolai-text"><div><span class="inline-wrap">资源名称。</span></div></div><span class="inline-wrap"></span><br/><div id="daQYW6hYKXbvJ5FQtPzskz" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="gM1zxe6F1Yv6mao6gVxZ1q" class="wolai-block wolai-text"><div><span class="inline-wrap">type</span></div></div><span class="inline-wrap"></span><br/><div id="vbJM5xVkyn7gVWDG4xRL6v" class="wolai-block wolai-text"><div><span class="inline-wrap">资源类型，如<span class="jill"></span>javax.sql.DataSource。</span></div></div><span class="inline-wrap"></span><br/><div id="oBuPmBXVtda7Th5GNV499z" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="3ttbUWjSNLAkeFW3YvNqBb" class="wolai-block wolai-text"><div><span class="inline-wrap">description</span></div></div><span class="inline-wrap"></span><br/><div id="mVNG7kUhvSm2QG7neaRPrt" class="wolai-block wolai-text"><div><span class="inline-wrap">资源描述。</span></div></div><span class="inline-wrap"></span><br/><div id="7e1TABLWprtxvGUFtF2xa9" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="n3JNyvuiaruDMbeRufzmGY" class="wolai-block wolai-text"><div><span class="inline-wrap">factory</span></div></div><span class="inline-wrap"></span><br/><div id="pGE8FbQheFw7y5oBjuMhpL" class="wolai-block wolai-text"><div><span class="inline-wrap">工厂类名。</span></div></div><span class="inline-wrap"></span><br/><div id="wX7cYmyJmQgpX7LBJD2WBw" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="t5vUyRnMk1Lde41sFmxe8S" class="wolai-block wolai-text"><div><span class="inline-wrap">pathname</span></div></div><span class="inline-wrap"></span><br/><div id="sLC4N5U8ceQ4kSkZoqvGsu" class="wolai-block wolai-text"><div><span class="inline-wrap">资源路径名。</span></div></div><span class="inline-wrap"></span><br/><div id="pfTnTokRf4CeJS9JCn2CEX" class="wolai-block wolai-text"><div><span class="inline-wrap">Valve</span></div></div><span class="inline-wrap"></span><br/><div id="w9cWsUbUKhyw58jeuSmJT7" class="wolai-block wolai-text"><div><span class="inline-wrap">className</span></div></div><span class="inline-wrap"></span><br/><div id="sefwsBZZxLeMnBUvp9KZFs" class="wolai-block wolai-text"><div><span class="inline-wrap">指定阀门类的全限定名。</span></div></div><span class="inline-wrap"></span><br/><div id="vMnFL4EM9wa7Won5ddFtsV" class="wolai-block wolai-text"><div><span class="inline-wrap">AccessLogValve</span></div></div><span class="inline-wrap"></span><br/><div id="pmPoUBeqYBfRfRNawskeqA" class="wolai-block wolai-text"><div><span class="inline-wrap">directory</span></div></div><span class="inline-wrap"></span><br/><div id="s6R4wCGiqd9cS1NXrtzMLh" class="wolai-block wolai-text"><div><span class="inline-wrap">访问日志目录。</span></div></div><span class="inline-wrap"></span><br/><div id="8qBYdurJnRhqJkPPYYAbai" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="jetZpG57ttCezXVryHy5mc" class="wolai-block wolai-text"><div><span class="inline-wrap">prefix</span></div></div><span class="inline-wrap"></span><br/><div id="nHHXWUKcTapmaVgSDeuAR4" class="wolai-block wolai-text"><div><span class="inline-wrap">日志文件前缀。</span></div></div><span class="inline-wrap"></span><br/><div id="joKuGYx5pGALh4hdKhZTM9" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="96SrmCzQ9oarbFbxdDSyXS" class="wolai-block wolai-text"><div><span class="inline-wrap">suffix</span></div></div><span class="inline-wrap"></span><br/><div id="dNbjoxCs19sCG8hEhmPsJW" class="wolai-block wolai-text"><div><span class="inline-wrap">日志文件后缀。</span></div></div><span class="inline-wrap"></span><br/><div id="jHeCXLqUUQJYRQh5zftW6U" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="6VPRrnpMQK67ggZr3SEisn" class="wolai-block wolai-text"><div><span class="inline-wrap">pattern</span></div></div><span class="inline-wrap"></span><br/><div id="gMUQjhBHmr5QmjZ8nT3hPd" class="wolai-block wolai-text"><div><span class="inline-wrap">日志格式模式。</span></div></div><span class="inline-wrap"></span><br/><div id="6WJPV5vB2GxhYMWTwUhpFR" class="wolai-block wolai-text"><div><span class="inline-wrap">Listener</span></div></div><span class="inline-wrap"></span><br/><div id="whM7Kr9SQgDWFpg3HmvK7D" class="wolai-block wolai-text"><div><span class="inline-wrap">className</span></div></div><span class="inline-wrap"></span><br/><div id="n7aQ9eMqRpS3bkqSFTj3Yb" class="wolai-block wolai-text"><div><span class="inline-wrap">指定监听器的类名。</span></div></div><div id="bDVVX8CagXy9aHFkE2HNHr" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 id="bLagFUkwiQmZaUVrZFPiYT" class="wolai-block"><span class="wolai-serial-number">6.2</span><span class="inline-wrap">context.xml</span></h2><span class="inline-wrap"></span><br/><div id="nwoNyatvry5aGqV8LfEWoQ" class="wolai-block wolai-text"><div><span class="inline-wrap">标签名</span></div></div><span class="inline-wrap"></span><br/><div id="88bWrL1xxrKSd7M7UHS9Tr" class="wolai-block wolai-text"><div><span class="inline-wrap">属性名</span></div></div><span class="inline-wrap"></span><br/><div id="fv76UMy6zmJGXLg4s9MXvv" class="wolai-block wolai-text"><div><span class="inline-wrap">作用</span></div></div><span class="inline-wrap"></span><br/><div id="fr5SdNwraP1SmgjMTfV9EG" class="wolai-block wolai-text"><div><span class="inline-wrap">Context</span></div></div><span class="inline-wrap"></span><br/><div id="jiG7BXB75tm5uRHb2591RA" class="wolai-block wolai-text"><div><span class="inline-wrap">path</span></div></div><span class="inline-wrap"></span><br/><div id="7eawBoksoxF6zGLuY3HHzB" class="wolai-block wolai-text"><div><span class="inline-wrap">指定<span class="jill"></span>Web<span class="jill"></span>应用的访问路径。</span></div></div><span class="inline-wrap"></span><br/><div id="cNGtQk61dR3ZwNfYAZLga4" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="fDShBEaNxfMWygrUKwb282" class="wolai-block wolai-text"><div><span class="inline-wrap">docBase</span></div></div><span class="inline-wrap"></span><br/><div id="hxogMvsMWKmXWJD5Nbprn3" class="wolai-block wolai-text"><div><span class="inline-wrap">Web<span class="jill"></span>应用的文件系统路径或<span class="jill"></span>WAR<span class="jill"></span>文件路径。</span></div></div><span class="inline-wrap"></span><br/><div id="nqCmKCmQxG85Cvt1329Deb" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="hd9hw4dx9pGcozoLwmQcUw" class="wolai-block wolai-text"><div><span class="inline-wrap">reloadable</span></div></div><span class="inline-wrap"></span><br/><div id="6DwdsPH59y7y8f6DdNp8cn" class="wolai-block wolai-text"><div><span class="inline-wrap">如果设置为<span class="jill"></span>true，Tomcat<span class="jill"></span>将在运行时监视<span class="jill"></span>Web<span class="jill"></span>应用的变化并自动重新加载。</span></div></div><span class="inline-wrap"></span><br/><div id="5RY2EzHTAo63f3PTacPj5t" class="wolai-block wolai-text"><div><span class="inline-wrap">WatchedResource</span></div></div><span class="inline-wrap"></span><br/><div id="p64pi8NQq1TbVCDDmb3b9W" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="3oRfi7mvav6qE8qaj2kuBS" class="wolai-block wolai-text"><div><span class="inline-wrap">指定<span class="jill"></span>Tomcat<span class="jill"></span>应监视的资源文件，如果这些文件发生变化，将触发应用重新加载。</span></div></div><span class="inline-wrap"></span><br/><div id="ag289KAPgN8tgw2upr5Yna" class="wolai-block wolai-text"><div><span class="inline-wrap">Resource</span></div></div><span class="inline-wrap"></span><br/><div id="t6g4ARD5yuM44ySXDqba7o" class="wolai-block wolai-text"><div><span class="inline-wrap">name</span></div></div><span class="inline-wrap"></span><br/><div id="5KPdQM5m7L1D49CwesmTMA" class="wolai-block wolai-text"><div><span class="inline-wrap">资源的名称，用于<span class="jill"></span>JNDI<span class="jill"></span>查找。</span></div></div><span class="inline-wrap"></span><br/><div id="anonbk1tAKHw4ZzBfVmrE1" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="mxAxdLLDiJRrPs1jb5m3Um" class="wolai-block wolai-text"><div><span class="inline-wrap">auth</span></div></div><span class="inline-wrap"></span><br/><div id="gf3EFHqrT4thG8YnePXeem" class="wolai-block wolai-text"><div><span class="inline-wrap">认证类型，通常为<span class="jill"></span>Container。</span></div></div><span class="inline-wrap"></span><br/><div id="7MFE2eCCQmievgHsycvGpE" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="r7Yon4YzmtR41HZMrfX8Yc" class="wolai-block wolai-text"><div><span class="inline-wrap">type</span></div></div><span class="inline-wrap"></span><br/><div id="gcr35BXuzcD5u6xrRVvqJW" class="wolai-block wolai-text"><div><span class="inline-wrap">资源的类型，例如<span class="jill"></span>javax.sql.DataSource。</span></div></div><span class="inline-wrap"></span><br/><div id="hu4CmzmYKivrYEqVr1WWgP" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="2EN4FrFhmgcmoMzTJ3E7ab" class="wolai-block wolai-text"><div><span class="inline-wrap">driverClassName</span></div></div><span class="inline-wrap"></span><br/><div id="wsatb2KyGd736x2JRTfaL3" class="wolai-block wolai-text"><div><span class="inline-wrap">JDBC<span class="jill"></span>驱动类名。</span></div></div><span class="inline-wrap"></span><br/><div id="bGSx5D7GqwCZS3SvSLaEWu" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="7GZ8tRscADJ5VUhZBk1eF7" class="wolai-block wolai-text"><div><span class="inline-wrap">url</span></div></div><span class="inline-wrap"></span><br/><div id="Sbg3wqtXutCxjjiNFmtdv" class="wolai-block wolai-text"><div><span class="inline-wrap">数据库<span class="jill"></span>URL。</span></div></div><span class="inline-wrap"></span><br/><div id="6qohNfjs7oS62GavYTk22f" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="f2HEUqZqXjRcagNDHUQmLQ" class="wolai-block wolai-text"><div><span class="inline-wrap">username</span></div></div><span class="inline-wrap"></span><br/><div id="ciEvuJP159Koxub9SDPxsx" class="wolai-block wolai-text"><div><span class="inline-wrap">数据库用户名。</span></div></div><span class="inline-wrap"></span><br/><div id="jU8khv51nkaSQR3xrgcDDt" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="ddCiuHXK8bYHq5KiboUJz7" class="wolai-block wolai-text"><div><span class="inline-wrap">password</span></div></div><span class="inline-wrap"></span><br/><div id="rFwaJLTpNCC65N8E1Xr1pX" class="wolai-block wolai-text"><div><span class="inline-wrap">数据库密码。</span></div></div><span class="inline-wrap"></span><br/><div id="nnHekehZdp9HHeyFVve3cz" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="qb3YoxuXSE7z9a7kxX9Kqw" class="wolai-block wolai-text"><div><span class="inline-wrap">maxActive</span></div></div><span class="inline-wrap"></span><br/><div id="dwAGeFdh2UUgewgP8dGoJC" class="wolai-block wolai-text"><div><span class="inline-wrap">连接池支持的最大连接数。</span></div></div><span class="inline-wrap"></span><br/><div id="qL4wp9cLxWSEaSstndDtNV" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="a3HpkkYP9rzuSk7g4rCXno" class="wolai-block wolai-text"><div><span class="inline-wrap">maxIdle</span></div></div><span class="inline-wrap"></span><br/><div id="3WvWG5f4uX1z4Sb3mtCwSb" class="wolai-block wolai-text"><div><span class="inline-wrap">连接池中最多可空闲的连接数。</span></div></div><span class="inline-wrap"></span><br/><div id="m36HduS8xBABoqJh3Z5GKC" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><span class="inline-wrap"></span><br/><div id="oJMUa5QUfg2U9XMGfobHyT" class="wolai-block wolai-text"><div><span class="inline-wrap">maxWait</span></div></div><span class="inline-wrap"></span><br/><div id="nKmRXY6opvfexe3RfD2CnW" class="wolai-block wolai-text"><div><span class="inline-wrap">连接池中连接用完时，新的请求等待时间（毫秒）。</span></div></div><div id="swYxTmFrNizYB9JQ5q6hVS" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>